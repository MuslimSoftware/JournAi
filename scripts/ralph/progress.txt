=== Ralph Progress Log ===

Started: 2026-01-16

Features completed:
- [2026-01-16] Feature 1: "System tracks processing status for each entry"
  - Added Migration 16: processed_at and content_hash columns to entries table
  - Added Migration 17: source_text, source_start, source_end columns to journal_insights table
  - Updated TypeScript types (JournalEntry, JournalInsight) with new optional fields
  - Updated EntryRow interface and rowToEntry function in src/services/entries.ts
  - Updated all SELECT queries in entries service to include new columns
  - Updated packages/core types and services to match
  - TypeScript compiles without errors

- [2026-01-17] Feature 2: "System can identify unprocessed entries"
  - Added getUnprocessedEntries() function to src/services/entries.ts
  - Added markEntryAsProcessed(id, contentHash) function to src/services/entries.ts
  - Added clearEntryProcessedStatus(id) function to src/services/entries.ts
  - These functions enable querying entries where processed_at IS NULL
  - TypeScript compiles without errors

- [2026-01-17] Feature 3: "System can process a single entry and generate insights"
  - Created src/services/entryAnalysis.ts with AI-powered entry analysis
  - analyzeEntry(entry): Uses OpenAI GPT-4o-mini to extract emotions and people from entry text
  - processEntry(entry): Full processing workflow - delete old insights, analyze, save new insights, mark as processed
  - generateContentHash(content): Hash function for detecting entry modifications
  - hasEntryBeenModified(entry): Checks if entry content has changed since last analysis
  - Updated saveInsights() in analytics.ts to include source_text, source_start, source_end fields
  - AI extracts emotions with: emotion name, intensity (1-10), trigger, sentiment, source location
  - AI extracts people with: name, relationship, sentiment, context, source location
  - Source positions are validated and corrected to ensure accuracy
  - Insights are saved with entry_id reference for navigation
  - TypeScript compiles without errors

Current task:
- Completed third iteration

Notes:
- This file tracks progress across Ralph iterations
- Each completed feature should be logged here with timestamp
- Include any important decisions or blockers encountered
- Feature 1 addresses PRD requirements for tracking processing status
- New fields are nullable to support existing entries without breaking changes
